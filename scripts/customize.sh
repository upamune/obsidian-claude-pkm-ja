#!/bin/bash

# Obsidian PKM ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ˜ãƒ«ãƒ‘ãƒ¼
# PKMã‚·ã‚¹ãƒ†ãƒ ã‚’å¯¾è©±çš„ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™

set -e

# è‰²è¨­å®š
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
MAGENTA='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m'

# ãƒãƒŠãƒ¼
echo -e "${MAGENTA}"
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘      PKM ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ                â•‘"
echo "â•‘      ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚º                    â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "${NC}"

# vault ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ¢ã™
if [ -f ".setup_complete" ]; then
    VAULT_PATH="$(pwd)"
else
    read -p "vault ã®ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: " VAULT_PATH
    VAULT_PATH="${VAULT_PATH/#\~/$HOME}"
fi

if [ ! -d "$VAULT_PATH" ]; then
    echo -e "${RED}ã‚¨ãƒ©ãƒ¼: Vault ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: $VAULT_PATH${NC}"
    exit 1
fi

cd "$VAULT_PATH"

# ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºé–¢æ•°
show_menu() {
    echo -e "\n${CYAN}ä½•ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã‹ï¼Ÿ${NC}"
    echo "=================================="
    echo "1. å€‹äººã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ»ä¾¡å€¤è¦³"
    echo "2. ã‚´ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ3å¹´ã€å¹´é–“ã€æœˆé–“ï¼‰"
    echo "3. ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"
    echo "4. ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹"
    echo "5. ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ "
    echo "6. ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"
    echo "7. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"
    echo "8. Claude ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆCLAUDE.mdï¼‰"
    echo "9. ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ "
    echo "10. ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆ"
    echo "0. çµ‚äº†"
    echo ""
    read -p "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠ (0-10): " choice
}

# æ©Ÿèƒ½ 1: ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
customize_mission() {
    echo -e "\n${BLUE}å€‹äººã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ»ä¾¡å€¤è¦³${NC}"
    echo "=========================="

    echo "å€‹äººã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã¯æ—¥ã€…ã®æ„æ€æ±ºå®šã‚’å°ãã¾ã™ã€‚"
    echo "ä¾‹: ã€Œãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’é€šã˜ã¦ä¾¡å€¤ã‚’å‰µé€ ã—ãªãŒã‚‰ã€äººé–“é–¢ä¿‚ã‚’å¤§åˆ‡ã«ã™ã‚‹ã€"
    echo ""
    read -p "ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: " MISSION

    if [ -n "$MISSION" ]; then
        # CLAUDE.md ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æ›´æ–°
        if [ -f "CLAUDE.md" ]; then
            cp "CLAUDE.md" "CLAUDE.md.bak"
            if [[ "$OSTYPE" == "darwin"* ]]; then
                sed -i '' "s/\[CUSTOMIZE THIS: Add your personal mission statement or life purpose here\]/$MISSION/" "CLAUDE.md"
            else
                sed -i "s/\[CUSTOMIZE THIS: Add your personal mission statement or life purpose here\]/$MISSION/" "CLAUDE.md"
            fi
        fi

        # ãƒ‡ã‚¤ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æ›´æ–°
        if [ -f "Templates/Daily Template.md" ]; then
            cp "Templates/Daily Template.md" "Templates/Daily Template.md.bak"
            if [[ "$OSTYPE" == "darwin"* ]]; then
                sed -i '' "s/_\[CUSTOMIZE THIS: Add your personal mission statement or daily reminder here\]_/_$MISSION_/" "Templates/Daily Template.md"
            else
                sed -i "s/_\[CUSTOMIZE THIS: Add your personal mission statement or daily reminder here\]_/_$MISSION_/" "Templates/Daily Template.md"
            fi
        fi

        echo -e "${GREEN}âœ“ ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ${NC}"
    fi

    echo -e "\n${BLUE}æ ¸ã¨ãªã‚‹ä¾¡å€¤è¦³${NC}"
    echo "ã‚ãªãŸã®3ã¤ã®å¤§åˆ‡ãªä¾¡å€¤è¦³ã¯ä½•ã§ã™ã‹ï¼Ÿ"
    read -p "ä¾¡å€¤è¦³ 1: " VALUE1
    read -p "ä¾¡å€¤è¦³ 2: " VALUE2
    read -p "ä¾¡å€¤è¦³ 3: " VALUE3

    # ä¾¡å€¤è¦³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
    cat > "Values.md" << EOF
# ç§ã®æ ¸ã¨ãªã‚‹ä¾¡å€¤è¦³

## 1. $VALUE1
ãªãœã“ã‚ŒãŒå¤§åˆ‡ã‹:

## 2. $VALUE2
ãªãœã“ã‚ŒãŒå¤§åˆ‡ã‹:

## 3. $VALUE3
ãªãœã“ã‚ŒãŒå¤§åˆ‡ã‹:

---
*ã“ã‚Œã‚‰ã®ä¾¡å€¤è¦³ãŒç§ã®æ„æ€æ±ºå®šã¨å„ªå…ˆé †ä½ã‚’å°ãã¾ã™ã€‚*
EOF

    echo -e "${GREEN}âœ“ ä¾¡å€¤è¦³ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ${NC}"
}

# æ©Ÿèƒ½ 2: ã‚´ãƒ¼ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
customize_goals() {
    echo -e "\n${BLUE}ã‚´ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—${NC}"
    echo "=================="

    echo "ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ã‚´ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†..."
    echo ""

    # 3å¹´ãƒ“ã‚¸ãƒ§ãƒ³
    echo -e "${CYAN}3å¹´ãƒ“ã‚¸ãƒ§ãƒ³${NC}"
    echo "3å¹´å¾Œã€ã©ã“ã«ã„ãŸã„ã§ã™ã‹ï¼Ÿ"
    read -p "ã‚­ãƒ£ãƒªã‚¢: " CAREER_3Y
    read -p "å¥åº·: " HEALTH_3Y
    read -p "äººé–“é–¢ä¿‚: " RELATIONSHIP_3Y
    read -p "çµŒæ¸ˆé¢: " FINANCIAL_3Y

    # 3å¹´ã‚´ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°
    cat > "Goals/0. Three Year Goals.md" << EOF
# 3å¹´ã‚´ãƒ¼ãƒ« ($(date +%Y)-$(($(date +%Y)+3)))

## ğŸŒŸ ãƒ“ã‚¸ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ
3å¹´å¾Œã€ç§ã¯ä»¥ä¸‹ã‚’é”æˆã—ã¦ã„ã¾ã™:

### ğŸ’¼ ã‚­ãƒ£ãƒªã‚¢ãƒ»å°‚é–€çš„æˆé•·
- $CAREER_3Y

### ğŸƒ å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹
- $HEALTH_3Y

### â¤ï¸ äººé–“é–¢ä¿‚ãƒ»å®¶æ—
- $RELATIONSHIP_3Y

### ğŸ’° çµŒæ¸ˆçš„å®‰å®š
- $FINANCIAL_3Y

---
*ä½œæˆæ—¥: $(date +%Y-%m-%d)*
EOF

    echo -e "${GREEN}âœ“ 3å¹´ã‚´ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã—ãŸ${NC}"

    # ä»Šå¹´ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
    echo -e "\n${CYAN}ä»Šå¹´ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹${NC}"
    read -p "ä»Šå¹´ã®æœ€ã‚‚é‡è¦ãªæŒ‡æ¨™ã¯ä½•ã§ã™ã‹ï¼Ÿ " ONE_METRIC
    read -p "ä»Šå¹´ã®ãƒ†ãƒ¼ãƒãƒ¯ãƒ¼ãƒ‰ã¯ï¼Ÿ " THEME

    # å¹´é–“ã‚´ãƒ¼ãƒ«ã‚’æ›´æ–°
    YEAR=$(date +%Y)
    sed -i.bak "s/\[CUSTOMIZE THIS:.*\]/$ONE_METRIC/" "Goals/1. Yearly Goals.md" 2>/dev/null || true

    echo -e "${GREEN}âœ“ å¹´é–“ã‚´ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã—ãŸ${NC}"
}

# æ©Ÿèƒ½ 3: ãƒ‡ã‚¤ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
customize_daily() {
    echo -e "\n${BLUE}ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º${NC}"
    echo "========================"

    echo "ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®æ§‹é€ ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã—ã‚‡ã†..."
    echo ""

    # æ™‚é–“ã®è¨­å®š
    echo "ã‚ãªãŸã®1æ—¥ã¯é€šå¸¸ä½•æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã‹ï¼Ÿ"
    read -p "èµ·åºŠæ™‚åˆ» (ä¾‹: 6:00 AM): " WAKE_TIME

    echo "ä»•äº‹ã¯ä½•æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã‹ï¼Ÿ"
    read -p "ä»•äº‹é–‹å§‹æ™‚åˆ» (ä¾‹: 9:00 AM): " WORK_START

    echo "ä»•äº‹ã¯ä½•æ™‚ã«çµ‚ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"
    read -p "ä»•äº‹çµ‚äº†æ™‚åˆ» (ä¾‹: 5:00 PM): " WORK_END

    # ã‚«ãƒ†ã‚´ãƒª
    echo -e "\n${CYAN}ã‚¿ã‚¹ã‚¯ã‚«ãƒ†ã‚´ãƒª${NC}"
    echo "ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ãŸã„ã‚«ãƒ†ã‚´ãƒªã¯ä½•ã§ã™ã‹ï¼Ÿï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰"
    echo "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ä»•äº‹, å€‹äºº, å­¦ç¿’, å¥åº·"
    read -p "ã‚«ãƒ†ã‚´ãƒª: " CATEGORIES
    CATEGORIES=${CATEGORIES:-"ä»•äº‹,å€‹äºº,å­¦ç¿’,å¥åº·"}

    # ç¿’æ…£
    echo -e "\n${CYAN}ãƒ‡ã‚¤ãƒªãƒ¼ç¿’æ…£${NC}"
    echo "ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ãŸã„ç¿’æ…£ã¯ä½•ã§ã™ã‹ï¼Ÿï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰"
    echo "ä¾‹: é‹å‹•, ç‘æƒ³, èª­æ›¸, æ—¥è¨˜"
    read -p "ç¿’æ…£: " HABITS

    # ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆ
    cat > "Templates/Daily Template - Custom.md" << EOF
---
date: {{date}}
tags: daily-note
---

# {{date:dddd, MMMM DD, YYYY}}

## ğŸ¯ ä»Šæ—¥ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
**æœ€ã‚‚é‡è¦ãªã“ã¨:**

## â° ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- **$WAKE_TIME - ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³**
- **$WORK_START - ãƒ¯ãƒ¼ã‚¯ãƒ–ãƒ­ãƒƒã‚¯**
- **12:00 PM - æ˜¼ä¼‘æ†©**
- **1:00 PM - åˆå¾Œã®ä»•äº‹**
- **$WORK_END - ä»•äº‹çµ‚äº†**
- **å¤•æ–¹ - å€‹äººæ™‚é–“**

## âœ… ã‚¿ã‚¹ã‚¯
EOF

    # ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ 
    IFS=',' read -ra CATS <<< "$CATEGORIES"
    for cat in "${CATS[@]}"; do
        cat=$(echo "$cat" | xargs)  # ç©ºç™½ã‚’ãƒˆãƒªãƒ 
        echo -e "\n### $cat\n- [ ] " >> "Templates/Daily Template - Custom.md"
    done

    # ç¿’æ…£ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
    echo -e "\n## ğŸ§˜ ç¿’æ…£" >> "Templates/Daily Template - Custom.md"
    IFS=',' read -ra HABS <<< "$HABITS"
    for hab in "${HABS[@]}"; do
        hab=$(echo "$hab" | xargs)
        echo "- [ ] $hab" >> "Templates/Daily Template - Custom.md"
    done

    # æŒ¯ã‚Šè¿”ã‚Šã‚’è¿½åŠ 
    cat >> "Templates/Daily Template - Custom.md" << EOF

## ğŸ’­ ãƒ¡ãƒ¢ãƒ»ã‚¢ã‚¤ãƒ‡ã‚¢


## ğŸ” 1æ—¥ã®æŒ¯ã‚Šè¿”ã‚Š
### ã†ã¾ãã„ã£ãŸã“ã¨
-

### æ”¹å–„ã§ãã‚‹ã“ã¨
-

### æ˜æ—¥ã®å„ªå…ˆäº‹é …
-

---
*365æ—¥ä¸­ã® {{date:D}} æ—¥ç›®*
EOF

    echo -e "${GREEN}âœ“ ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ã‚¤ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸ${NC}"
}

# æ©Ÿèƒ½ 4: ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
customize_weekly() {
    echo -e "\n${BLUE}ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º${NC}"
    echo "============================"

    echo "ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã„ã¤è¡Œã„ã¾ã™ã‹ï¼Ÿ"
    echo "1. æ—¥æ›œæ—¥ã®å¤œ"
    echo "2. æœˆæ›œæ—¥ã®æœ"
    echo "3. é‡‘æ›œæ—¥ã®åˆå¾Œ"
    echo "4. åœŸæ›œæ—¥ã®æœ"
    read -p "é¸æŠ (1-4): " REVIEW_TIME

    case $REVIEW_TIME in
        1) REVIEW_DAY="æ—¥æ›œæ—¥ã®å¤œ" ;;
        2) REVIEW_DAY="æœˆæ›œæ—¥ã®æœ" ;;
        3) REVIEW_DAY="é‡‘æ›œæ—¥ã®åˆå¾Œ" ;;
        4) REVIEW_DAY="åœŸæ›œæ—¥ã®æœ" ;;
        *) REVIEW_DAY="æ—¥æ›œæ—¥ã®å¤œ" ;;
    esac

    echo -e "\nãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã©ã®ãã‚‰ã„æ™‚é–“ã‚’ã‹ã‘ã¾ã™ã‹ï¼Ÿ"
    read -p "åˆ†æ•° (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 30): " REVIEW_DURATION
    REVIEW_DURATION=${REVIEW_DURATION:-30}

    # ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆ
    cat > "Templates/Weekly Review - Custom.md" << EOF
# ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ - {{date:YYYY [Week] w}}
**ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚é–“:** $REVIEW_DAY ($REVIEW_DURATION åˆ†)

## ğŸ“Š ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- å®Œäº†ã‚¿ã‚¹ã‚¯æ•°: /
- ã‚´ãƒ¼ãƒ«é€²æ—: %
- å¹³å‡ã‚¨ãƒãƒ«ã‚®ãƒ¼: /10

## ğŸ” å…ˆé€±ã®æŒ¯ã‚Šè¿”ã‚Š

### ãƒˆãƒƒãƒ—3ã®æˆæœ
1.
2.
3.

### ãƒˆãƒƒãƒ—3ã®èª²é¡Œ
1.
2.
3.

### é‡è¦ãªæ°—ã¥ã
-

## ğŸ“… æ¥é€±ã®è¨ˆç”»

### æœ€ã‚‚é‡è¦ãª1ã¤ã®ã“ã¨
ä½•ã‚‚ã§ããªã‹ã£ãŸã¨ã—ã¦ã‚‚ã€ã“ã‚Œã ã‘ã¯:

### å„ªå…ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
1.
2.
3.

### ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«äºˆå®š
- é›†ä¸­ä½œæ¥­æ™‚é–“:
- ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°:
- å€‹äººæ™‚é–“:

## ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- [ ] ã‚¤ãƒ³ãƒœãƒƒã‚¯ã‚¹ã‚’å‡¦ç†
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
- [ ] å¤ã„ãƒãƒ¼ãƒˆã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
- [ ] ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¨ˆç”»

---
*ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰€è¦æ™‚é–“: ___ åˆ†*
EOF

    echo -e "${GREEN}âœ“ ã‚¦ã‚£ãƒ¼ã‚¯ãƒªãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ $REVIEW_DAY ç”¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã—ãŸ${NC}"
}

# æ©Ÿèƒ½ 5: ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
customize_tags() {
    echo -e "\n${BLUE}ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—${NC}"
    echo "================="

    echo "ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†..."
    echo ""

    echo "ã‚¿ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠ:"
    echo "1. éšå±¤å‹ (#åˆ†é‡/ã‚µãƒ–åˆ†é‡/å…·ä½“çš„)"
    echo "2. ãƒ•ãƒ©ãƒƒãƒˆå‹ (#åˆ†é‡-å…·ä½“çš„)"
    echo "3. ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å‹ (#p-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ, #a-åˆ†é‡)"
    read -p "ã‚¹ã‚¿ã‚¤ãƒ« (1-3): " TAG_STYLE

    echo -e "\nä¸»è¦ãªç”Ÿæ´»åˆ†é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰:"
    echo "ä¾‹: ä»•äº‹, å€‹äºº, å¥åº·, è²¡å‹™, å­¦ç¿’"
    read -p "ã‚ãªãŸã®åˆ†é‡: " AREAS

    # ã‚¿ã‚°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ä½œæˆ
    cat > "Tag System.md" << EOF
# ç§ã®ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ 

## æ§‹é€ 
EOF

    case $TAG_STYLE in
        1)
            echo "éšå±¤å‹ã‚¿ã‚°:" >> "Tag System.md"
            IFS=',' read -ra AREA_ARRAY <<< "$AREAS"
            for area in "${AREA_ARRAY[@]}"; do
                area=$(echo "$area" | xargs)
                echo "- #$area/" >> "Tag System.md"
                echo "  - #$area/é€²è¡Œä¸­" >> "Tag System.md"
                echo "  - #$area/å¾…æ©Ÿä¸­" >> "Tag System.md"
                echo "  - #$area/ã„ã¤ã‹" >> "Tag System.md"
            done
            ;;
        2)
            echo "ãƒ•ãƒ©ãƒƒãƒˆå‹ã‚¿ã‚°:" >> "Tag System.md"
            IFS=',' read -ra AREA_ARRAY <<< "$AREAS"
            for area in "${AREA_ARRAY[@]}"; do
                area=$(echo "$area" | xargs)
                echo "- #$area" >> "Tag System.md"
                echo "- #${area}-é€²è¡Œä¸­" >> "Tag System.md"
                echo "- #${area}-å¾…æ©Ÿä¸­" >> "Tag System.md"
            done
            ;;
        3)
            echo "ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å‹ã‚¿ã‚°:" >> "Tag System.md"
            echo "- #p- (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)" >> "Tag System.md"
            echo "- #a- (åˆ†é‡)" >> "Tag System.md"
            echo "- #t- (ãƒˆãƒ”ãƒƒã‚¯)" >> "Tag System.md"
            echo "- #s- (ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹)" >> "Tag System.md"
            ;;
    esac

    cat >> "Tag System.md" << EOF

## ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ã‚°
- #é€²è¡Œä¸­ - ç¾åœ¨ä½œæ¥­ä¸­
- #å¾…æ©Ÿä¸­ - ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‹å¾…æ©Ÿä¸­
- #ã„ã¤ã‹ - å°†æ¥ã®æ¤œè¨äº‹é …
- #å®Œäº† - å®Œäº†æ¸ˆã¿
- #ä¸­æ­¢ - ã‚‚ã¯ã‚„é–¢é€£æ€§ãªã—

## å„ªå…ˆåº¦ã‚¿ã‚°
- #å„ªå…ˆåº¦/é«˜ - ä»Šæ—¥å¿…é ˆ
- #å„ªå…ˆåº¦/ä¸­ - ä»Šé€±ä¸­
- #å„ªå…ˆåº¦/ä½ - å¯èƒ½ãªæ™‚ã«

## ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚¿ã‚°
- #ã‚¨ãƒãƒ«ã‚®ãƒ¼/é«˜ - é›†ä¸­åŠ›ãŒå¿…è¦
- #ã‚¨ãƒãƒ«ã‚®ãƒ¼/ä¸­ - é€šå¸¸ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼
- #ã‚¨ãƒãƒ«ã‚®ãƒ¼/ä½ - ç–²ã‚Œã¦ã„ã¦ã‚‚ã§ãã‚‹

## ã‚¯ã‚¤ãƒƒã‚¯æ¤œç´¢ã‚¯ã‚¨ãƒª
- ã™ã¹ã¦ã®é€²è¡Œä¸­ã‚’æ¤œç´¢: tag:#é€²è¡Œä¸­
- ä»Šæ—¥ã®å„ªå…ˆäº‹é …: tag:#å„ªå…ˆåº¦/é«˜
- å¾…æ©Ÿä¸­ã®ã‚¢ã‚¤ãƒ†ãƒ : tag:#å¾…æ©Ÿä¸­
EOF

    echo -e "${GREEN}âœ“ ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œæˆã—ã¾ã—ãŸ${NC}"
}

# æ©Ÿèƒ½ 6: ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
customize_time_blocks() {
    echo -e "\n${BLUE}ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º${NC}"
    echo "========================"

    echo "ç†æƒ³çš„ãªã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†..."
    echo ""

    echo "ã©ã®ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã‹ï¼Ÿ"
    echo "1. ä¼çµ±çš„ï¼ˆ9-5ï¼‰"
    echo "2. æ—©èµ·ãï¼ˆ5æ™‚ã‚¹ã‚¿ãƒ¼ãƒˆï¼‰"
    echo "3. å¤œå‹ï¼ˆé…ã‚ã«ä½œæ¥­ï¼‰"
    echo "4. ãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆ"
    echo "5. ã‚·ãƒ•ãƒˆãƒ¯ãƒ¼ã‚¯"
    read -p "é¸æŠ (1-5): " SCHEDULE_TYPE

    case $SCHEDULE_TYPE in
        1)
            BLOCKS="6-7 AM: ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³
7-8 AM: è¨ˆç”»ã¨ãƒ¡ãƒ¼ãƒ«
8-9 AM: é€šå‹¤
9-12 PM: é›†ä¸­ä½œæ¥­
12-1 PM: æ˜¼é£Ÿ
1-3 PM: ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°
3-5 PM: ç®¡ç†æ¥­å‹™
5-6 PM: ã¾ã¨ã‚ä½œæ¥­
6-9 PM: å€‹äººæ™‚é–“"
            ;;
        2)
            BLOCKS="5-6 AM: ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³
6-8 AM: é›†ä¸­ä½œæ¥­
8-9 AM: é‹å‹•
9-12 PM: é›†ä¸­ãƒ¯ãƒ¼ã‚¯
12-1 PM: æ˜¼é£Ÿ
1-3 PM: ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°
3-5 PM: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ™‚é–“
5-7 PM: å®¶æ—æ™‚é–“
7-9 PM: å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"
            ;;
        3)
            BLOCKS="8-9 AM: ã‚†ã£ãã‚Šã¨ã—ãŸæœ
9-10 AM: é‹å‹•
10-12 PM: ç®¡ç†æ¥­å‹™
12-1 PM: æ˜¼é£Ÿ
1-4 PM: ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°
4-6 PM: ä¼‘æ†©ãƒ»å€‹äººæ™‚é–“
6-8 PM: å¤•é£Ÿ
8-12 AM: é›†ä¸­ä½œæ¥­"
            ;;
        4)
            BLOCKS="7-8 AM: ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³
8-10 AM: é›†ä¸­ä½œæ¥­ãƒ–ãƒ­ãƒƒã‚¯1
10-12 PM: ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ–ãƒ­ãƒƒã‚¯
12-1 PM: æ˜¼é£Ÿã¨æ•£æ­©
1-3 PM: é›†ä¸­ä½œæ¥­ãƒ–ãƒ­ãƒƒã‚¯2
3-4 PM: ç®¡ç†æ¥­å‹™ãƒ»ãƒ¡ãƒ¼ãƒ«
4-5 PM: æ˜æ—¥ã®è¨ˆç”»
5-7 PM: å€‹äººæ™‚é–“
7-9 PM: å­¦ç¿’ãƒ»å‰¯æ¥­ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"
            ;;
        5)
            echo "ã‚·ãƒ•ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:"
            read -p "ã‚·ãƒ•ãƒˆé–‹å§‹: " SHIFT_START
            read -p "ã‚·ãƒ•ãƒˆçµ‚äº†: " SHIFT_END
            BLOCKS="ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒ•ãƒˆ: $SHIFT_START - $SHIFT_END"
            ;;
    esac

    # ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆ
    cat > "Time Blocks.md" << EOF
# ç§ã®ç†æƒ³çš„ãªã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯

## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
$BLOCKS

## é›†ä¸­ä½œæ¥­æ™‚é–“
æœ€é«˜ã®é›†ä¸­åŠ›: [ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º]
è‰¯å¥½ãªé›†ä¸­åŠ›: [ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º]
ä½ã„é›†ä¸­åŠ›: [ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º]

## ãƒ«ãƒ¼ãƒ«
1. é›†ä¸­ä½œæ¥­ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®ˆã‚‹
2. åŒç¨®ã®ã‚¿ã‚¹ã‚¯ã‚’ã¾ã¨ã‚ã‚‹
3. ä¼‘æ†©ã‚’å«ã‚ã‚‹
4. 1æ—¥ã®çµ‚ã‚ã‚Šã«è¨ˆç”»ã™ã‚‹

## é€±ã”ã¨ã®å¤‰æ›´
- æœˆæ›œæ—¥: è¨ˆç”»é‡è¦–
- ç«æ›œæ—¥ã€œæœ¨æ›œæ—¥: å®Ÿè¡Œ
- é‡‘æ›œæ—¥: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã¾ã¨ã‚

---
*ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨å„ªå…ˆé †ä½ã«å¿œã˜ã¦èª¿æ•´*
EOF

    echo -e "${GREEN}âœ“ ã‚¿ã‚¤ãƒ ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¨­å®šã—ã¾ã—ãŸ${NC}"
}

# æ©Ÿèƒ½ 10: ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆ
create_custom_command() {
    echo -e "\n${BLUE}ã‚«ã‚¹ã‚¿ãƒ  Claude ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆ${NC}"
    echo "============================="

    read -p "ã‚³ãƒãƒ³ãƒ‰åï¼ˆä¾‹: 'report'ï¼‰: " CMD_NAME
    read -p "ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜: " CMD_DESC

    echo "ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ"
    echo "1. ç‰¹å®šã®ã‚¿ã‚¤ãƒ—ã®ãƒãƒ¼ãƒˆã‚’ä½œæˆ"
    echo "2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œ"
    echo "3. ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ"
    echo "4. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿè¡Œ"
    read -p "é¸æŠ (1-4): " CMD_TYPE

    # ã‚³ãƒãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
    cat > ".claude/commands/$CMD_NAME.md" << EOF
# $CMD_NAME ã‚³ãƒãƒ³ãƒ‰

$CMD_DESC

## ä½¿ç”¨æ–¹æ³•
\`\`\`
claude code /$CMD_NAME
\`\`\`

## ã“ã®ã‚³ãƒãƒ³ãƒ‰ãŒè¡Œã†ã“ã¨
EOF

    case $CMD_TYPE in
        1)
            read -p "ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå: " TEMPLATE
            cat >> ".claude/commands/$CMD_NAME.md" << EOF
1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰æ–°ã—ã„ãƒãƒ¼ãƒˆã‚’ä½œæˆ
2. é©åˆ‡ã«åå‰ã‚’ä»˜ã‘ã‚‹
3. æ­£ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®

## è¨­å®š
const TEMPLATE_PATH = "Templates/$TEMPLATE.md";
const OUTPUT_FOLDER = "[ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º]";
EOF
            ;;
        2)
            cat >> ".claude/commands/$CMD_NAME.md" << EOF
1. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œ
2. é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°
3. å‡ºåŠ›ã‚’ç”Ÿæˆ

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¹ãƒ†ãƒƒãƒ—
1. [ã‚¹ãƒ†ãƒƒãƒ— 1]
2. [ã‚¹ãƒ†ãƒƒãƒ— 2]
3. [ã‚¹ãƒ†ãƒƒãƒ— 3]
EOF
            ;;
        3)
            cat >> ".claude/commands/$CMD_NAME.md" << EOF
1. æŒ‡å®šã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æ
2. ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
3. æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã«ä¿å­˜

## ãƒ¬ãƒãƒ¼ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ã‚µãƒãƒªãƒ¼
- è©³ç´°
- æ¨å¥¨äº‹é …
EOF
            ;;
        4)
            cat >> ".claude/commands/$CMD_NAME.md" << EOF
1. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
2. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
3. æ§‹é€ ã‚’æœ€é©åŒ–

## ã‚¿ã‚¹ã‚¯
- å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
- é‡è¤‡ã‚’å‰Šé™¤
EOF
            ;;
    esac

    echo -e "${GREEN}âœ“ ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ '/$CMD_NAME' ã‚’ä½œæˆã—ã¾ã—ãŸ${NC}"
}

# ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
while true; do
    show_menu

    case $choice in
        1) customize_mission ;;
        2) customize_goals ;;
        3) customize_daily ;;
        4) customize_weekly ;;
        5) customize_tags ;;
        6) customize_time_blocks ;;
        7) echo "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯è¿‘æ—¥å…¬é–‹äºˆå®š..." ;;
        8) echo "ä»Šã®ã¨ã“ã‚ CLAUDE.md ã‚’ç›´æ¥ç·¨é›†ã—ã¦ãã ã•ã„..." ;;
        9) echo "ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯è¿‘æ—¥å…¬é–‹äºˆå®š..." ;;
        10) create_custom_command ;;
        0)
            echo -e "\n${GREEN}ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå®Œäº†ã—ã¾ã—ãŸï¼${NC}"
            echo "PKM ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã—ãŸã€‚"

            # å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ
            cd "$VAULT_PATH"
            git add .
            git commit -m "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®æ›´æ–° - $(date +%Y-%m-%d)" 2>/dev/null || true

            exit 0
            ;;
        *) echo -e "${RED}ç„¡åŠ¹ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™${NC}" ;;
    esac

    echo -e "\n${CYAN}Enter ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...${NC}"
    read
done
