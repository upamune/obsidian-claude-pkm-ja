---
paths: "**/*.md"
---

# セッションタスクトラッキング規約

これらの規約は、複数ステップの操作中に進捗状況を可視化するためのClaude Codeセッションタスクツール（`TaskCreate`、`TaskUpdate`、`TaskList`）の使用方法を定めています。

## 重要な区別

**セッションタスク ≠ 実際のタスク**

- **セッションタスク**：Claudeセッション中のみ存在する一時的な進捗インジケーター
- **実際のタスク**：デイリーノート内のマークダウンチェックボックスでセッション間で永続化される

セッションタスクは*Claudeが何をしているか*を示します。マークダウンチェックボックスは*あなたが何をすべきか*を追跡します。

## セッションタスクを使用するタイミング

3つ以上の明確なステップを持つ操作にセッションタスクを使用します：

### 適切なユースケース
- 朝/夕方のルーチン（4つ以上のステップ）
- 週次レビューフェーズ（3つのフェーズ）
- バッチ形式のインボックス処理（複数項目）
- 複数ファイルの分析（目標カスケード）
- Vault整理監査

### セッションタスクをスキップする場合
- 単一ファイルの読み書き
- クイック検索
- シンプルな編集
- 1-2ステップの操作

## タスク命名規約

### subject（命令形）
```
デイリーノートを作成
未完了タスクをプル
目標進捗を計算
インボックス項目を処理
```

### activeForm（現在進行形）
```
デイリーノートを作成中...
未完了タスクをプル中...
目標進捗を計算中...
インボックス項目を処理中...
```

`activeForm`はタスク実行中にスピナーに表示されます。

## タスク依存関係

順序が重要な場合は依存関係を使用します：

```
タスク1: 収集（依存関係なし）
タスク2: 振り返り（blockedBy: タスク1）
タスク3: 計画（blockedBy: タスク2）
```

これによりフェーズが順番に完了することを保証します。

## 進捗パターン

### 順次ステップ
```
[スピナー] ステップ 1/4: デイリーノートを作成中...
[スピナー] ステップ 2/4: タスクをプル中...
[スピナー] ステップ 3/4: 目標を表示中...
[スピナー] ステップ 4/4: タイムブロックを設定中...
[完了] 朝のルーチン完了 (4/4)
```

### バッチ処理
```
[スピナー] 項目 1/5を処理中: 会議メモ...
[スピナー] 項目 2/5を処理中: 本のアイデア...
...
[完了] インボックス完了 (5/5項目)
```

### フェーズ化された作業
```
[完了] フェーズ1: 収集完了
[スピナー] フェーズ2: 振り返り進行中...
[保留中] フェーズ3: 計画（ブロック中）
```

## ステータス遷移

```
pending → in_progress → completed
```

- タスク開始時に`in_progress`を設定
- 完全に完了した場合のみ`completed`を設定
- 未完了の作業をcompletedとしてマークしない

## ベストプラクティス

1. **タスクを事前に作成** - 複数ステップの操作の開始時にすべてのタスクを作成
2. **進行中に更新** - 開始前にin_progressをマーク、完了後にcompletedをマーク
3. **activeFormを使用** - ユーザー可視性のため常にスピナーテキストを提供
4. **軽量に保つ** - シンプルな操作を過剰にタスク化しない
5. **永続化にはマークダウンを信頼** - セッションタスクは消える。実際の作業にはチェックボックスを使用

## PKMとの統合

セッションタスクは以下を補完しますが、置き換えません：

| 関心事 | ツール |
|---------|------|
| セッション中の進捗 | セッションタスク（TaskCreate/Update） |
| 実際のToDoアイテム | デイリーノート内のマークダウンチェックボックス |
| 目標トラッキング | 目標ファイル内のパーセンテージ |
| プロジェクトステータス | プロジェクトCLAUDE.mdファイル |
