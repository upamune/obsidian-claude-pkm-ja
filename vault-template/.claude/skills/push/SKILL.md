---
name: push
description: スマートなコミットメッセージでVaultの変更をコミットしてプッシュします。ファイルを自動ステージし、意味のあるコミットを作成し、リモートと同期します。Vaultの変更後や1日の終わりに使用します。
allowed-tools: Bash, Read, Glob
user-invocable: true
---

# Git Push スキル

意味のあるコミットメッセージでノートを保存し、リモートリポジトリにプッシュするGitワークフローを自動化します。

## 使い方

`/push`で呼び出すか、Claudeに変更を保存/コミットするよう依頼してください。

### 基本的な使い方
```
/push
```

### カスタムメッセージ付き
```
/push "プロジェクト計画を完了"
```

## このスキルの機能

1. **すべての変更をステージング**
   - 変更されたファイルをすべて追加
   - 新しいファイルを含める
   - 削除されたファイルを除外

2. **スマートなコミットメッセージを作成**
   - 提供されたメッセージを使用、または
   - 変更から自動生成
   - 日時スタンプを含める
   - 主要な変更を要約

3. **リモートと同期**
   - 最新の変更を取得（有効な場合）
   - リモートリポジトリにプッシュ
   - マージコンフリクトを適切に処理

## コミットメッセージの形式

### 自動メッセージ
変更に基づいて生成されます：
```
Daily note for 2024-01-15 + 3 project updates
- Added: Daily Notes/2024-01-15.md
- Modified: Projects/Learning Spanish/notes.md
- Modified: Goals/2. Monthly Goals.md
```

### タイムスタンプ付き
```
[2024-01-15 09:30] 週次レビューを完了
```

## ワークフロー統合

### 朝のルーチン
```
/daily          # デイリーノートを作成
# ... ノート作業 ...
/push "朝の計画を完了"
```

### 1日の終わり
```
# デイリーリフレクションを完了
/push           # 要約付き自動メッセージ
```

### 週次レビュー後
```
/weekly         # 週次レビューを実行
/push "週次レビュー - 第3週"
```

## Git操作

### 標準フロー
1. `git add .` - すべての変更をステージング
2. `git commit -m "message"` - コミットを作成
3. `git pull --rebase origin main` - リモートの変更を取得
4. `git push origin main` - リモートにプッシュ

### 安全性チェック
- Gitリポジトリの存在を確認
- コミットされていない変更を確認
- リモートが設定されていることを確認
- ブランチの存在を検証

## コンフリクトの処理

コンフリクトが発生した場合：
1. 自動解決を試行（ノートについてはローカルを優先）
2. 手動解決が必要な場合は、プロセスをガイド
3. 明示的な要求なしに強制プッシュしない

## セキュリティ上の考慮事項

### コミットしてはいけないもの
- パスワードや認証情報
- APIキー
- 個人識別情報
- 金融情報

### .gitignoreを使用する対象
```
private/
credentials.md
.env
.obsidian/workspace*
.obsidian/cache
.trash/
.DS_Store
```

## トラブルシューティング

### プッシュが拒否された場合
まずプルしてから、再度プッシュしてください：
```bash
git pull --rebase origin main
git push origin main
```

### Gitリポジトリではない場合
```bash
git init
git remote add origin [URL]
```

### 大きなファイルの問題
画像や添付ファイルにはGit LFSの使用を検討してください。

## 統合

以下と連携します：
- `/daily` - デイリーノート作成後にコミット
- `/weekly` - 週次レビュー後にコミット
- `/onboard` - コンテキスト読み込みにはgitは不要
- 自動保存用の自動コミットフック
